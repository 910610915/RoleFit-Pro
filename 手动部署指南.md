# 手动部署指南（无需Docker）

本文档介绍不使用Docker的手动部署方法。

---

## 方式一：手动本地部署

### 1. 安装基础软件

| 软件 | 版本 | 下载地址 |
|------|------|----------|
| Python | 3.10+ | python.org |
| Node.js | 18+ | nodejs.org |

> 注：SQLite 无需单独安装，已内置于 Python 标准库中。

---

### 2. 安装Python依赖

```cmd
cd backend

:: 创建虚拟环境
python -m venv venv
venv\Scripts\activate

:: 安装依赖
pip install -r requirements.txt

:: 复制环境配置
copy .env.example .env

:: 编辑 .env 文件，修改数据库连接
```

---

### 3. 安装Node.js依赖

```cmd
cd frontend

:: 安装依赖
npm install

:: 复制环境配置
copy .env.example .env

:: 构建生产版本
npm run build
```

---

### 4. 配置数据库

> 注：SQLite 无需配置，数据库文件会在首次启动时自动创建。

系统默认使用 SQLite，数据文件位于 `backend/hardware_benchmark.db`

---

### 5. 启动服务

**启动后端：**
```cmd
cd backend
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

**启动前端（开发）：**
```cmd
cd frontend
npm run dev
```

**或使用Nginx托管构建后的前端：**
```nginx
server {
    listen 80;
    root C:/path/to/frontend/dist;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

---

## 方式二：云服务部署

### 推荐云平台

| 平台 | 适合 | 说明 |
|------|------|------|
| Railway | 个人/小型 | 按量付费，易部署 |
| Render | 个人/小型 | 免费层可用 |
| Fly.io | 个人/小型 | 全球CDN |
| 阿里云 | 企业 | 国内访问快 |
| 腾讯云 | 企业 | 国内访问快 |

### Railway 部署示例

1. **注册账号**: railway.app

2. **连接GitHub**: 推送代码到GitHub

3. **创建项目**:
   ```
   New -> GitHub Repository -> 选择项目
   ```

4. **添加数据库（可选）**:
   ```
   如需部署到云数据库，可添加 MySQL 或 PostgreSQL
   ```

5. **配置环境变量**:
   ```
   DATABASE_URL=sqlite:///./hardware_benchmark.db
   ```

6. **部署**: 自动部署

---

## 方式三：虚拟主机部署

### 使用VPS

| 服务商 | 特点 |
|--------|------|
| 阿里云/腾讯云 | 国内访问快 |
| DigitalOcean | 国际线路好 |
| Linode | 性价比高 |
| Vultr | 灵活计费 |

### 部署步骤

```bash
# 1. 连接服务器
ssh root@your-server-ip

# 2. 安装必要软件
apt update && apt install -y python3 python3-pip nodejs npm nginx

# 3. 部署后端（SQLite 无需配置）
cd /opt/hardware-benchmark/backend
pip install -r requirements.txt
python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --daemon

# 5. 部署前端
cd /opt/hardware-benchmark/frontend
npm install && npm run build
cp -r dist/* /var/www/html/

# 6. 配置Nginx反向代理
```

---

## 对比总结

| 部署方式 | 优点 | 缺点 |
|----------|------|------|
| Docker | 简单快速，一键部署 | 需要Docker基础 |
| 手动本地 | 无额外依赖 | 配置复杂 |
| 云平台 | 免维护 | 可能有费用 |
| VPS | 完全控制 | 需要运维 |

---

## 推荐

- **个人开发测试**: 使用 Docker（最简单）
- **学习了解**: 手动本地部署
- **生产环境**: Docker + VPS/云服务器
